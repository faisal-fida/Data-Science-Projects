<html><head><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/components/image.min.css"></head><body><div class="container"><div class="row"><div class="col-md-10 col-md-offset-1 ui image"><p class="lead"><p>Let’s turn our attention to the Genres column. This is quite similar to the categories column but more granular.</p><p><br></p><h4>Challenge </h4><p>How many different types of genres are there? Can an app belong to more than one genre? Check what happens when you use <code>.value_counts()</code> on a column with nested values? See if you can work around this problem by using the <code>.split()</code> function and the DataFrame's <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.stack.html" rel="noopener noreferrer" target="_blank">.stack() method</a>.</p><p><br></p><p><br></p><p><br></p><p><br></p><p>.</p><p>.</p><p>..</p><p>…</p><p>..</p><p>.</p><p>.</p><p><br></p><p><br></p><p><strong>Solution: Working with Nested Column Data</strong></p><p>If we look at the number of unique values in the Genres column we get 114. But this is not accurate if we have nested data like we do here. We can see this using <code>.value_counts()</code> and looking at the values that just have a single entry. There we see that the semi-colon (<code>;</code>) separates the genre names.</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-11_13-18-53-e5af936a84354a54fc2ef2d1eea24e77.png"></figure><p>We somehow need to separate the genre names to get a clear picture. This is where the string’s <code>.split()</code> method comes in handy. After we’ve separated our genre names based on the semi-colon, we can add them all into a single column with <code>.stack()</code> and then use <code>.value_counts()</code>.</p><p><br></p><pre class="prettyprint linenums"># Split the strings on the semi-colon and then .stack them.<br>stack = df_apps_clean.Genres.str.split(';', expand=True).stack()<br>print(f'We now have a single column with shape: {stack.shape}')<br>num_genres = stack.value_counts()<br>print(f'Number of genres: {len(num_genres)}')</pre><p>This shows us we actually have 53 different genres.</p><h4>Challenge</h4><p>Can you create this chart with the Series containing the genre data?</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-11_13-20-25-275a5904eaf5ce179f8fc10d1cdb4f2b.png"></figure><p>Try experimenting with the built-in colour scales in Plotly. You can find a full list <a href="https://plotly.com/python/builtin-colorscales/" rel="noopener noreferrer" target="_blank">here</a>.</p><ul><li><p>Find a way to set the colour scale using the <code>color_continuous_scale</code> parameter.</p></li><li><p>Find a way to make the colour axis disappear by using <code>coloraxis_showscale</code>.</p></li></ul><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p>.</p><p>.</p><p>..</p><p>…</p><p>..</p><p>.</p><p>.</p><p><br></p><p><br></p><p><strong>Solution: Working with Colour Scales in Plotly</strong></p><p><br></p><pre class="prettyprint linenums">bar = px.bar(x = num_genres.index[:15], # index = category name<br>             y = num_genres.values[:15], # count<br>             title='Top Genres',<br>             hover_name=num_genres.index[:15],<br>             color=num_genres.values[:15],<br>             color_continuous_scale='Agsunset')<br>bar.update_layout(xaxis_title='Genre',<br>yaxis_title='Number of Apps',<br>coloraxis_showscale=False)<br>bar.show()</pre></p></div></div></div></body></html>