<html><head><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/components/image.min.css"></head><body><div class="container"><div class="row"><div class="col-md-10 col-md-offset-1 ui image"><p class="lead"><p>You (aka Dr Semmelweis)&nbsp;are working at Vienna General Hospital. Let's take a closer look at the data you've been collecting on the number of births and maternal deaths throughout the 1840s. </p><figure><img height="307" src="https://img-c.udemycdn.com/redactor/raw/2020-10-23_10-38-09-9527e9a9d46107327b4fa76246c62b81.png" width="427"></figure><p><br></p><h4>Challenge 1:&nbsp;Preliminary Data Exploration</h4><ul><li><p>What is the shape of <code>df_yearly</code> and <code>df_monthly</code>? How many rows and columns?</p></li><li><p>What are the column names?</p></li><li><p>Which years are included in the dataset?</p></li><li><p>Are there any NaN values or duplicates?</p></li><li><p>What were the average number of births that took place per month?</p></li><li><p>What were the average number of deaths that took place per month?</p></li></ul><p><br></p><p>.</p><p>.</p><p>..</p><p>...</p><p>..</p><p>.</p><p>.</p><p><br></p><p><strong>Solution to Challenge 1</strong></p><p>Using <code>.shape</code>, <code>.head()</code>, <code>.tail()</code> we see that the dataset covers the years 1841 to 1849. The two tables report the total number of births and the total number of deaths. Interestingly, the yearly data breaks the number of birthds and deaths down by clinic. </p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-23_10-42-54-fb1af5f4e2bd231b283dabdaca8cc4c3.png"></figure><p>We see that there are no NaN&nbsp;values in either of the DataFrames. We can verify this either with using <code>.info()</code> or using <code>.isna().values.any()</code>. </p><figure><img height="528" src="https://img-c.udemycdn.com/redactor/raw/2020-10-23_10-47-41-c48e37522afaa8f220c19a26a4c7ab73.png" width="418"></figure><p>There are also no duplicate entries. In other words, the dataset appears to be clean.</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-23_10-48-41-6018a072a58ca120945dab55dbbdc651.png"></figure><p>Using <code>.describe()</code> allows us to view some interesting statistics at a glance. We see that on average there were about 267 births and 22.47 deaths per month. </p><figure><img height="412" src="https://img-c.udemycdn.com/redactor/raw/2020-10-23_10-52-34-6870fc442c6051d51df38af7904c328b.png" width="592"></figure><p> </p><h4>Challenge 2:&nbsp;Percentage of Women Dying in Childbirth</h4><p>How dangerous was childbirth in the 1840s in Vienna?</p><ul><li><p>Using the annual data, calculate the percentage of women giving birth who died throughout the 1840s at the hospital.</p></li></ul><p>In comparison, the United States recorded 18.5 maternal deaths per 100,000 or 0.018% in 2013 <a href="https://en.wikipedia.org/wiki/Maternal_death#:~:text=The%20US%20has%20the%20%22highest,17.8%20per%20100%2C000%20in%202009" rel="noopener noreferrer" target="_blank">(source).</a></p><p><br></p><p>.</p><p>.</p><p>..</p><p>...</p><p>..</p><p>.</p><p>.</p><p><br></p><p><br></p><p><strong>Solution to Challenge 2</strong></p><p>Childbirth was very risky! About 7.08% of women died ðŸ’€ in the 1840s (compared to 0.018% in the US in 2013). </p><pre class="prettyprint linenums">prob = df_yearly.deaths.sum() / df_yearly.births.sum() * 100<br>print(f'Chances of dying in the 1840s in Vienna: {prob:.3}%')</pre><p>If someone gave me a bag of 100 M&amp;Ms and told me that 7 of them would kill me, I'd (probably) pass on those M&amp;Ms ðŸ¤­. Just saying.</p><p><br></p><h4>Challenge 3:&nbsp;Visualise the Total Number of Births ðŸ¤± and Deaths ðŸ’€ over Time</h4><p>Create a <a href="https://matplotlib.org/3.3.2/api/_as_gen/matplotlib.pyplot.plot.html" rel="noopener noreferrer" target="_blank">Matplotlib chart</a> with twin y-axes. It should look something like this:</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-23_11-06-31-76e4e6fbe90cd4edb47e9dee6eb3da5f.png"></figure><ul><li><p>Format the x-axis using locators for the years and months (Hint: we did this in the Google Trends notebook)</p></li><li><p>Set the range on the x-axis so that the chart lines touch the y-axes</p></li><li><p>Add gridlines</p></li><li><p>Use <code>skyblue</code> and <code>crimson</code> for the line colours</p></li><li><p>Use a dashed line style for the number of deaths</p></li><li><p>Change the line thickness to 3 and 2 for the births and deaths respectively.</p></li><li><p>Do you notice anything in the late 1840s?</p></li></ul><p><br></p><p>.</p><p>.</p><p>..</p><p>...</p><p>..</p><p>.</p><p>.</p><p><br></p><p><strong>Solution to Challenge 3</strong></p><p>Just as in previous notebooks we can use <code>.twinx()</code>&nbsp;to create to y-axes. Then it's just a matter of adding a gird with <code>.grid()</code> and configuring the look of our plots with the <code>color</code>, <code>linewidth</code>, and <code>linestyle</code> parameters. </p><pre class="prettyprint linenums">plt.figure(figsize=(14,8), dpi=200)<br>plt.title('Total Number of Monthly Births and Deaths', fontsize=18)<br>ax1 = plt.gca()<br>ax2 = ax1.twinx()<br>ax1.grid(color='grey', linestyle='--')<br>ax1.plot(df_monthly.date, <br>         df_monthly.births, <br>         color='skyblue', <br>         linewidth=3)<br>ax2.plot(df_monthly.date, <br>         df_monthly.deaths, <br>         color='crimson', <br>         linewidth=2, <br>         linestyle='--')<br>plt.show()</pre><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-23_11-11-50-6276fcca4bbc46fa057415c170ba9189.png"></figure><p>To get the tickmarks showing up on the x-axis, we need to use <code>mdates</code> and Matplotlib's locators.</p><pre class="prettyprint linenums"># Create locators for ticks on the time axis<br>years = mdates.YearLocator()<br>months = mdates.MonthLocator()<br>years_fmt = mdates.DateFormatter('%Y') </pre><p>We can then use the locators in our chart:</p><pre class="prettyprint linenums">plt.figure(figsize=(14,8), dpi=200)<br>plt.title('Total Number of Monthly Births and Deaths', fontsize=18)<br>plt.yticks(fontsize=14)<br>plt.xticks(fontsize=14, rotation=45)<br>ax1 = plt.gca()<br>ax2 = ax1.twinx()<br>ax1.set_ylabel('Births', color='skyblue', fontsize=18)<br>ax2.set_ylabel('Deaths', color='crimson', fontsize=18)<br># Use Locators<br>ax1.set_xlim([df_monthly.date.min(), df_monthly.date.max()])<br>ax1.xaxis.set_major_locator(years)<br>ax1.xaxis.set_major_formatter(years_fmt)<br>ax1.xaxis.set_minor_locator(months)<br>ax1.grid(color='grey', linestyle='--')<br>ax1.plot(df_monthly.date, <br>         df_monthly.births, <br>         color='skyblue', <br>         linewidth=3)<br>ax2.plot(df_monthly.date, <br>         df_monthly.deaths, <br>         color='crimson', <br>         linewidth=2, <br>         linestyle='--')<br>plt.show()</pre><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-23_11-16-35-039658c53b985fcbb11f9ffa26d074fd.png"></figure><p>What we see is that something happened after 1847. The total number of deaths seems to have dropped, despite an increasing number of births!&nbsp;ðŸ¤”</p><p><br></p></p></div></div></div></body></html>