<html><head><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/components/image.min.css"></head><body><div class="container"><div class="row"><div class="col-md-10 col-md-offset-1 ui image"><p class="lead"><p>For this next bit, we're going to compare which countries actually get the most prizes. And we're also going to look at in which categories those prizes are awarded. This has me feeling a little like I'm at the Olympics ðŸ˜Š. </p><p><br></p><h4>Challenge 1:&nbsp;Top 20 Country Ranking</h4><ul><li><p>Create a Pandas DataFrame called <code>top20_countries</code> that has the two columns. The <code>prize</code> column should contain the total number of prizes won.</p></li></ul><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-20_14-42-59-9fb704fd63feff9b691697416ea5c722.png"></figure><ul><li><p>Is it best to use <code>birth_country</code>, <code>birth_country_current</code> or <code>organization_country</code>?</p></li><li><p>What are some potential problems when using <code>birth_country</code> or any of the others? Which column is the least problematic?</p></li><li><p>Then use plotly to create a horizontal bar chart showing the number of prizes won by each country. Here's what you're after:</p></li></ul><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-20_14-43-26-c29a036da3674550eb3e9879a6f1b3a6.png"></figure><ul><li><p>What is the ranking for the top 20 countries in terms of the number of prizes?</p></li></ul><p><br></p><p><br></p><h4>Challenge 2:&nbsp;Choropleth Map</h4><ul><li><p>Create this choropleth map using <a href="https://plotly.com/python/choropleth-maps/" rel="noopener noreferrer" target="_blank">the plotly documentation</a>:</p></li></ul><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-20_14-44-57-c9ec3018035c0e32588e167a8e8b0a00.png"></figure><ul><li><p>Experiment with <a href="https://plotly.com/python/builtin-colorscales/" rel="noopener noreferrer" target="_blank">plotly's available colours</a>. I quite like the sequential colour <code>matter</code> on this map.</p></li></ul><p>Hint: You'll need to use a 3 letter country code for each country.</p><p><br></p><h4>Challenge 3:&nbsp;Country Bar Chart with Prize Category</h4><p>See if you can divide up the plotly bar chart you created above to show the which categories made up the total number of prizes. Here's what you're aiming for:</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-20_15-11-40-896b68120f5e2daa0e2823f286619336.png"></figure><ul><li><p>In which category are Germany and Japan the weakest compared to the United States?</p></li><li><p>In which category does Germany have more prizes than the UK?</p></li><li><p>In which categories does France have more prizes than Germany?</p></li><li><p>Which category makes up most of Australia's Nobel prizes?</p></li><li><p>Which category makes up half of the prizes in the Netherlands?</p></li><li><p>Does the United States have more prizes in Economics than all of France? What about in Physics or Medicine?</p></li></ul><p>The hard part is preparing the data for this chart!</p><p><em>Hint</em>: Take a two-step approach. The first step is grouping the data by country and category. Then you can create a DataFrame that looks something like this:</p><figure><img height="261" src="https://img-c.udemycdn.com/redactor/raw/2020-10-20_15-11-54-d06c71c4976b32b66b2bef08144cb67a.png" width="529"></figure><p><br></p><h4>Challenge 4:&nbsp;Prizes by Country over Time</h4><p>Every country's fortunes wax and wane over time. Investigate how the total number of prizes awarded changed over the years.</p><ul><li><p>When did the United States eclipse every other country in terms of the number of prizes won?</p></li><li><p>Which country or countries were leading previously?</p></li><li><p>Calculate the cumulative number of prizes won by each country in every year. Again, use the <code>birth_country_current</code> of the winner to calculate this.</p></li><li><p>Create a <a href="https://plotly.com/python/line-charts/" rel="noopener noreferrer" target="_blank">plotly line chart</a> where each country is a coloured line.</p></li></ul><p><br></p><p>.</p><p>.</p><p>..</p><p>...</p><p>..</p><p>.</p><p>.</p><p><br></p><p><strong>Solution 1:&nbsp;Prize ranking by Country</strong></p><p>Looking at our DataFrame there are actually 3 different columns to choose from for creating this ranking:&nbsp;<code>birth_country</code>, <code>birth_country_current</code> or <code>organization_country</code>. However, they each have certain problems and limitations. </p><p>If you look at the entries in the birth country, you'll see that some countries no longer exist! These include the Soviet Union or Czechoslovakia for example. Hence, using <code>birth_country_current</code> is better, since it has the country name which controls the city where the laureate was born. Now, notice that this does not determine the laureates' nationality since some globetrotting folks gave birth to their future Nobel laureate children while abroad. Also, people's nationalities can change as they emigrate and acquire different citizenship or get married and change citizenship. What this boils down to is that we will have to be clear about the assumptions that we will make in the upcoming analysis. </p><p>We can create the list of the top 20 countries like this:</p><pre class="prettyprint linenums">top_countries = df_data.groupby(['birth_country_current'], <br>                                  as_index=False).agg({'prize': pd.Series.count})<br>top_countries.sort_values(by='prize', inplace=True)<br>top20_countries = top_countries[-20:]</pre><p>Note that the ranking here determines how our bar chart will be displayed. </p><pre class="prettyprint linenums">h_bar = px.bar(x=top20_countries.prize,<br>               y=top20_countries.birth_country_current,<br>               orientation='h',<br>               color=top20_countries.prize,<br>               color_continuous_scale='Viridis',<br>               title='Top 20 Countries by Number of Prizes')<br>h_bar.update_layout(xaxis_title='Number of Prizes', <br>                    yaxis_title='Country',<br>                    coloraxis_showscale=False)<br>h_bar.show()</pre><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-20_15-28-14-d0951596c2e1a822e6b53fd9fc21e3ff.png"></figure><p>The United States has a massive number of prizes by this measure. The UK&nbsp;and Germany are in second and third place respectively. </p><p><br></p><p><strong>Solution 2:&nbsp;Displaying the Data on a Map</strong></p><p>To show the above ranking on a colour coded map, we need to make use of the ISO&nbsp;codes. </p><pre class="prettyprint linenums">df_countries = df_data.groupby(['birth_country_current', 'ISO'], <br>                               as_index=False).agg({'prize': pd.Series.count})<br>df_countries.sort_values('prize', ascending=False)</pre><p>This means we can use the ISO&nbsp;country codes for the <code>locations</code> parameter on the choropleth. </p><pre class="prettyprint linenums">world_map = px.choropleth(df_countries,<br>                          locations='ISO',<br>                          color='prize', <br>                          hover_name='birth_country_current', <br>                          color_continuous_scale=px.colors.sequential.matter)<br>world_map.update_layout(coloraxis_showscale=True,)<br>world_map.show()</pre><p>I&nbsp;love it how plotly allows you to zoom in and pan on the map it generates.</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-20_15-37-05-1293d524e40e6b3bd08f6f171ab4facb.png"></figure><p><br></p><p><strong>Solution 3:&nbsp;The category breakdown by country</strong></p><p>Preparing our data to show the breakdown by category and country is challenging. We'll take a two-step approach here. First we count the prizes by category in each country:</p><pre class="prettyprint linenums">cat_country = df_data.groupby(['birth_country_current', 'category'], <br>                               as_index=False).agg({'prize': pd.Series.count})<br>cat_country.sort_values(by='prize', ascending=False, inplace=True)</pre><figure><img height="367" src="https://img-c.udemycdn.com/redactor/raw/2020-10-20_15-39-34-67274118d7ced9c4bf5a8f81c3f667f1.png" width="416"></figure><p>Next, we can merge the DataFrame above with the top20_countries DataFrame that we created previously. That way we get the total number of prizes in a single column too. This is important since we want to control the order for our bar chart. </p><pre class="prettyprint linenums">merged_df = pd.merge(cat_country, top20_countries, on='birth_country_current')<br># change column names<br>merged_df.columns = ['birth_country_current', 'category', 'cat_prize', 'total_prize'] <br>merged_df.sort_values(by='total_prize', inplace=True)</pre><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-20_15-42-03-e31d94a8366dcf1b7c91618eb9e234f9.png"></figure><p>Now we can create our bar chart again. This time we use the color parameter based on the category. </p><pre class="prettyprint linenums">cat_cntry_bar = px.bar(x=merged_df.cat_prize,<br>                       y=merged_df.birth_country_current,<br>                       color=merged_df.category,<br>                       orientation='h',<br>                       title='Top 20 Countries by Number of Prizes and Category')<br>cat_cntry_bar.update_layout(xaxis_title='Number of Prizes', <br>                            yaxis_title='Country')<br>cat_cntry_bar.show()</pre><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-20_15-44-31-1906cb97c5380befcc9d9c09d2880032.png"></figure><p>Splitting the country bar chart by category allows us to get a very granular look at the data and answer a whole bunch of questions. For example, we see is that the US has won an incredible proportion of the prizes in the field of Economics. In comparison, Japan and Germany have won very few or no economics prize at all. Also, the US has more prizes in physics or medicine alone than all of France's prizes combined. On the chart, we also see that Germany won more prizes in physics than the UK and that France has won more prizes in peace and literature than Germany, even though Germany has been awarded a higher total number of prizes than France. </p><figure><img height="472" src="https://img-c.udemycdn.com/redactor/raw/2020-10-20_15-51-40-5627f6616c19c5a17810133b49a1fbc2.png" width="475"></figure><p>When did the United States become so dominant?&nbsp;Was it always this way? Has the prize become more global in scope?&nbsp;</p><p><br></p><p><strong>Solution 4:&nbsp;Country Prizes over Time</strong></p><p>To see how the prize was awarded over time. To do that, we can count the number of prizes by country by year. </p><pre class="prettyprint linenums">prize_by_year = df_data.groupby(by=['birth_country_current', 'year'], as_index=False).count()<br>prize_by_year = prize_by_year.sort_values('year')[['year', 'birth_country_current', 'prize']]</pre><p>Then we can create a series that has the cumulative sum for the number of prizes won. </p><pre class="prettyprint linenums">cumulative_prizes = prize_by_year.groupby(by=['birth_country_current',<br>                                              'year']).sum().groupby(level=[0]).cumsum()<br>cumulative_prizes.reset_index(inplace=True) </pre><p>Using this, we can create a chart, using the current birth country as the <code>color</code>:</p><pre class="prettyprint linenums">l_chart = px.line(cumulative_prizes,<br>                  x='year', <br>                  y='prize',<br>                  color='birth_country_current',<br>                  hover_name='birth_country_current')<br>l_chart.update_layout(xaxis_title='Year',<br>                      yaxis_title='Number of Prizes')<br>l_chart.show()</pre><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-20_16-05-40-d768858f0f5ab25eb4082e5b2d0332cf.gif"></figure><p>What we see is that the United States really started to take off after the Second World War which decimated Europe. Prior to that, the Nobel prize was pretty much a European affair. Very few laureates were chosen from other parts of the world. This has changed dramatically in the last 40 years or so. There are many more countries represented today than in the early days. Interestingly we also see that the UK&nbsp;and Germany traded places in the 70s and 90s on the total number of prizes won. Sweden being 5th place pretty consistently over many decades is quite interesting too. Perhaps this reflects a little bit of home bias?&nbsp;ðŸ˜Š </p><p><br></p><p>All this analysis of different countries makes me curious about where the actual research is happening. Where are the cities and organisations located where people actually make discoveries?&nbsp;</p><p><br></p><p><br></p></p></div></div></div></body></html>